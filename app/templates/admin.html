{% extends "base.html" %}

{% block content %}
<div class="content">
    <div class="box">
        <div class="cell flex-one-row">
            <h1>管理后台</h1>
        </div>
        <div class="sep20"></div>
        <div id="user_control" class="cell" style="display:flex;flex-direction:column;">
            <h3>用户管理</h3>
            <form action="/admin" method="post">
                {{userform.hidden_tag()}}
                <label for="uid">Uid（多个以空格分隔，必填）：</label>
                <div class="sep10"></div>
                {{userform.uid(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="level">等级(0-5)：</label>
                <div class="sep10"></div>
                {{userform.level(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="privilege">权限(1-3)：</label>
                <div class="sep10"></div>
                {{userform.priv(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="ban">封禁状态(0-5)：</label>
                <div class="sep10"></div>
                {{userform.banned_status(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages and messages[0][0]=='user' %}
                    <ul>
                        {% for category, message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                {% endwith %}
                {{userform.submit(class="btn",style="width:20%",value="提交")}}
                <div class="sep20"></div>
            </form>
        </div>
        <div class="sep20"></div>
        <div id="post_control" class="cell" style="display:flex;flex-direction:column;">
            <h3>主题管理</h3>
            <form action="/admin" method="post">
                {{postform.hidden_tag()}}
                <label for="pid">Pid（多个以空格分隔，必填）：</label>
                <div class="sep10"></div>
                {{postform.pid(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="node">隶属节点Nid：</label>
                <div class="sep10"></div>
                {{postform.node(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>    
                <label for="access_level">阅读等级(0-5)：</label>
                <div class="sep10"></div>
                {{postform.access_level(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="sort">排序优先级(越大越靠前)：</label>
                <div class="sep10"></div>
                {{postform.sort(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="is_top">置顶：{{postform.topped}}</label>
                <div class="sep10"></div>
                <label for="readonly">只读：{{postform.readonly}}</label>
                <div class="sep10"></div>
                {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages and messages[0][0]=='post'%}
                    <ul>
                        {% for category, message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                {% endwith %}
                {{postform.submit(class="btn",style="width:20%",value="提交")}} 
                <div class="sep20"></div>
            </form>
        </div>
        <div class="sep20"></div>
        <div id="node_control" class="cell" style="display:flex;flex-direction:column;">
            <h3>节点管理</h3>
            <form action="/admin" method="post">
                {{nodeform.hidden_tag()}}
                <label for="nid">Nid（不支持批量更改，留空视为新建）：</label>
                <div class="sep10"></div>
                {{nodeform.nid(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="name">节点名：</label>
                <div class="sep10"></div>
                {{nodeform.name(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="description">描述：</label>
                <div class="sep10"></div>
                {{nodeform.description(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="url">链接：</label>
                <div class="sep10"></div>
                {{nodeform.url(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="avatar">图标：</label>
                <div class="sep10"></div>
                {{nodeform.avatar(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="access_level">阅读等级(0-5)：</label>
                <div class="sep10"></div>
                {{nodeform.access_level(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                <label for="parent">父节点Nid(大于等于1，1为无父节点)：</label>
                <div class="sep10"></div>
                {{nodeform.parent(class="input-normal",style="width:60%")}}
                <div class="sep10"></div>
                {% with messages = get_flashed_messages(with_categories=True) %}
                {% if messages and messages[0][0]=='node'%}
                    <ul>
                        {% for category, message in messages %}
                            <li>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                {% endwith %}
                {{nodeform.submit(class="btn",style="width:20%",value="提交")}}
            </form>
        </div>
    </div>
</div>
{% endblock %}